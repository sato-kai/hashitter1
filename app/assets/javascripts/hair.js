$(document).on("turbolinks:load",function(){

  function appendMensHair1(){
    var mensHairHtml = '';
    mensHairHtml = `<div class="hair">
                      <svg version="1.1" viewBox="0 0 210 297" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg">
                        <path d="m169.33 120.79-10.583-21.167c0 8.4667-10.583 19.05-21.167 21.167l1.5875-21.167c-3.5879 4.5086-22.754 19.05-33.338 21.167l4.2333-26.987c-12.056 25.957-57.15 35.454-67.733 35.454v-22.225 33.337l-7.9375-21.696c-2.6458 21.167-4.7625 0-4.7625-31.75 4.2333-30.692 23.283-31.75 4.2333-29.104 29.633-44.979 82.622-23.927 29.633-31.221 24.342-2.6458 62.533-14.38 63.5 0.52917 6.819 3.507 31.75 4.7625 42.333 38.629 15.012 15.805 11.32 30.968 10.583 44.45l-10.583 29.104v-32.808z" stroke-width="2.5" stroke="#0c080c"></path>
                      </svg>
                    </div>`;
    $('#hair').append(mensHairHtml);
  }
  function appendMensHair2(){
    var mensHairHtml = '';
    mensHairHtml = `<div class="hair">
                      <svg version="1.1" viewBox="0 0 210 297" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg">
                        <path d="m105.83 20.775c5.2917 1.0583 15.875 1.0583 26.458-4.2333l-5.2917 4.7625c11.962 6.7297 22.131 7.23 31.75 5.8208l-15.875 5.2917c4.3624 4.4656 17.869 7.5528 31.75 10.583l-10.583 5.2917c7.045 8.8255 12.29 18.681 21.167 26.458h-10.583c4.1172 12.51 8.9958 31.75 15.875 37.042l-10.583-5.2917-8.9958 26.458-3.7042-30.692-3.175 14.817-10.583-21.167-10.583-10.583-26.458 21.167 5.2917-26.458-26.458 26.458v-21.167l-26.458 31.75v-21.167l-15.875 26.458-5.2917-21.167-6.8792 31.75-8.9958-26.458-7.4083 5.2917c-0.20441-0.40379 8.3855-23.973 12.7-37.042h-10.583c6.0542-4.5518 14.069-17.461 21.167-26.458l-10.583-5.2917c17.221-3.4643 28.243-6.9878 31.75-10.583l-15.875-5.2917c9.1644 0.94736 21.167 2e-6 31.75-5.2917l-5.2917-4.7625c12.282 3.2964 21.167 4.7625 26.458 3.7042z" stroke="#000" stroke-width="3"/>
                      </svg>
                    </div>`;
    $('#hair').append(mensHairHtml);
  }
  function appendMensHair3(){
    var mensHairHtml = '';
    mensHairHtml = `<div class="hair">
                      <svg version="1.1" viewBox="0 0 210 297" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg">
                        <g stroke="#000">
                          <path d="m31.75 95.917c3.5112-38.873 26.458-68.792 74.083-74.083 47.625 5.2917 70.646 34.892 74.083 74.083 1e-5 15.875-5.2917 23.813-10.583 39.688l-5.2917-2.6458-5.2917-26.458-5.2917-21.167h-95.25l-5.2917 21.167-5.2917 26.458-5.2917 2.6458c-5.2917-10.583-10.583-23.812-10.583-39.688z" stroke-width="3"/>
                      </svg>
                    </div>`;
    $('#hair').append(mensHairHtml);
  }
  function appendLadiesHair1(){
    var ladiesHairHtml = '';
    ladiesHairHtml = `<div class="hair">
                        <svg version="1.1" viewBox="0 0 210 297" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg">
                          <path d="m137.58 93.8c-4.1375 6.1587-10.051 12.565-31.75 21.167l10.583-21.167c-19.155 19.684-45.239 27.985-74.083 31.75l21.167 42.333-10.583-10.583v10.583l-13.758-21.167c-7.4083-10.583-17.992-31.75-12.171-63.5 9.3032-24.916 13.471-51.186 78.846-62.442 42.359 7.3462 73.104 24.377 76.2 62.442 8.4667 21.167 2.6823 58.225-7.9375 67.204l-14.288 17.462-2.1167-13.229-10.054 12.171c5.9372-5.5448 10.508 1.3806 21.696-41.275l-10.583-31.75c0 10.583-4.0156 14.888-21.167 21.167z" stroke-width="3" stroke="#000"></path>
                        </svg>
                      </div>`;
    $('#hair').append(ladiesHairHtml);
  }
  function appendLadiesHair2(){
    var ladiesHairHtml = '';
    ladiesHairHtml = `<div class="hair">
                        <svg version="1.1" viewBox="0 0 210 297" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg">
                          <g stroke="#000">
                            <path d="m23.283 80.042c-4.9849 14.166-2.1167 26.458 1.0583 33.338 10.241 22.373 16.231 19.592 23.283 30.162-5.8486-8.6914-12.48-14.723-15.875-31.75-5e-6 -1.6715-5.2917-21.167 0-31.75-1.8115-5.1736 6.8792-23.283 12.171-28.575-2.9223-3.353-12.171-1.5875-12.7-2.6458-10.583 3.175-14.048 0.3359-20.638 20.638l-5.2917 15.875c-1.14e-5 9.3345-5.9e-6 15.06 0 21.167 3.7506 13.235 7.2394 31.865 10.583 37.042 5.2917 3.5278 17.408 11.605 15.875 10.583 15.875 10.583 14.97 13.912 16.933 15.875v10.583l-1.0583 10.583c15.875 0 21.167-10.583 15.875-26.458-5.2917-5.2917-5.2917-5.2917-10.583-10.583l-5.2917-10.583-1.5875-15.875c22.754-10.583 45.791-20.703 59.796-42.333-8.5805 10.151-20.324 20.665-37.042 31.75 26.458 0 52.064-11.434 68.792-31.75-5.1845 14.977-13.312 27.825-26.458 37.042 18.604-2.0064 35.23-7.8381 37.042-42.333 15.204 24.188 21.167 47.625 15.875 63.5 7.5856-11.217 9.8976-22.414 5.2917-47.625 0 15.875 5.2917 26.458 0 37.042 4.2346-7.3436 10.583-21.167 10.583-26.458 0-21.167-6.8093-53.929-28.046-73.025-15.817-8.7222-46.038-18.521-67.204-7.9375-21.167 0-30.162 10.583-40.746 26.458 0 1e-6 -5.2917 6.8792-9.525 15.346" stroke-linejoin="round" stroke-opacity=".97233" stroke-width="3"/>
                            <path d="m63.5 74.75c-14.745 14.492-15.875 26.458-15.875 42.333v0" stroke-linecap="round" stroke-width="3"/>
                            <path class="hair_band" d="m42.863 50.408c-5.952 8.4466-5.8208 8.4667-11.289 21.96l-5.1153-2.9104c0-5.2917 4.7625-16.933 8.4667-19.05 2.1167-2.1167 4.4129-0.92269 7.9375 0z" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.9764"/>
                        </svg>
                      </div>`;
    $('#hair').append(ladiesHairHtml);
  }
  function appendLadiesHair3(){
    var ladiesHairHtml = '';
    ladiesHairHtml = `<div class="hair">
                        <svg version="1.1" viewBox="0 0 210 297" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg">
                          <path d="m 142,482.51966 c 54,156 18,179.99988 18,219.99987 -20,60.00013 -21.31313,123.77098 -20,160.00013 0.1758,10.8372 47.70705,110.05723 49.93949,89.81628 8.95388,-81.18261 14.43998,-132.2602 24.28811,-109.46665 25.7724,59.65037 53.47432,150.61033 60.67836,111.67086 2.41885,-13.07446 6.58014,-70.50134 -8.07485,-112.4616 -3.30705,-9.46877 70.03226,163.51805 81.24534,113.24357 51.92356,-232.80246 84.49834,7.63859 91.92356,7.19755 21.98573,-32.85466 46.93818,-55.03409 60,-120.00001 47.68383,-10.64925 -1.50711,121.09859 9.61417,111.39181 32.28158,-28.17577 66.30383,-73.01276 89.06767,-125.34647 4.43812,-10.20315 2.08495,127.55966 1.71022,120.91091 -0.39206,-6.95624 66.71725,-57.19115 59.60793,-106.95638 -3.30319,-37.75884 4.39145,-34.41353 -20,-140 -10.75865,-45.99541 -21.99996,-143.99987 10.00001,-203.99987 -18.57427,89.71838 -50,84 -61.13539,102.15077 -4.73534,7.71865 -71.72664,34.80813 -95.69254,56.70826 -93.17207,85.14097 -93.17207,85.14097 -187.07666,1.90608 C 287.42291,642.73388 245.35315,624.29329 225.32445,611.49098 180,582.51966 176,578.51966 142,482.51966 Z" style="fill-opacity:1;stroke:#000000;stroke-width:11.33858299;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" transform="scale(0.26458333)"/>
                          <path d="m 320,242.51953 c -11.29308,56.46542 -53.36129,124.77659 -69.62128,175.83575 -13.95719,43.82798 -34.69653,86.48816 -52.19243,104.69168 -9.30199,9.6782 21.58426,69.23922 13.30323,75.83383 C 189.22061,616.61464 152.15781,502.51957 148,502.51953 53.948647,195.01011 243.12361,67.86864 418.63133,75.066007 578.79636,81.634189 732.96827,264.02931 648,502.51953 c -14.87026,34.66471 -25.15791,71.21879 -63.99999,96.00013 L 580,382.51953 560.00001,482.51966 C 528.47948,428.24684 506.35781,386.48265 500,302.51953 c -19.99999,100.00013 -7.73026,107.62224 10e-6,160.00013 -24.30995,-37.68701 -16.90635,-2.96408 -80,-180 -5.8744,121.92351 12.71973,136.0369 20,200 C 404.93976,430.79904 349.05213,392.62764 320,242.51953 Z" style="fill-opacity:1;stroke:#000000;stroke-width:11.33858299;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:0.93609021" transform="scale(0.26458333)"/>
                        </svg>
                      </div>`;
    var ladiesFrontHairHtml = '';
    ladiesFrontHairHtml = `<div class="hair">
                            <svg version="1.1" viewBox="0 0 210 297" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg">
                              <path d="m 68.791666,74.74999 c -9.911097,31.61383 0.176148,67.21885 3.704167,84.66667 C 59.87411,152.39505 47.625,80.041658 52.916667,117.08332 63.5,169.99999 68.728685,168.40991 74.083333,201.74999 61.444397,183.11935 44.957047,153.69143 42.333333,117.08332" style="fill-opacity:0.99624062;stroke:#000000;stroke-width:3;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"/>
                              <path d="m 146.05,92.212492 c 9.9111,31.613828 -3.35114,49.756348 -6.87916,67.204168 27.10126,-22.22251 19.57916,-42.33334 19.57916,-42.33334 5.29167,15.875 -15.875,42.33334 -21.16667,80.9625 12.63893,-18.63064 31.75,-43.92083 31.75,-80.9625" style="fill-opacity:1;stroke:#000000;stroke-width:3;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />
                            </svg>
                          </div>`;
    $('#hair').append(ladiesHairHtml);
    $('#front-hair').append(ladiesFrontHairHtml);
  }


  $('input[name="user[avatar_attributes][hair]"]:radio').change(function(){
    $('.hair').remove();
    var hairStyle = $('input[name="user[avatar_attributes][hair]"]:checked').val();
    var color = $('#hair-color-field').val();
    if (hairStyle == 'mens_hair1'){
      $('.hair').remove();
      appendMensHair1();
      $('.hair').css('fill', color)
    }else if (hairStyle == 'mens_hair2'){
      $(".hair").remove();
      appendMensHair2();
      $('.hair').css('fill', color)
    }else if (hairStyle == 'mens_hair3'){
      $('.hair').remove();
      appendMensHair3();
      $('.hair').css('fill', color)
    }else if (hairStyle == 'ladies_hair1'){
      $('.hair').remove();
      appendLadiesHair1();
      $('.hair').css('fill', color)
    }else if (hairStyle == 'ladies_hair2'){
      $('.hair').remove();
      appendLadiesHair2();
      $('.hair').css('fill', color)
    }else {
      $('.hair').remove();
      appendLadiesHair3();
      $('.hair').css('fill', color)
    };
    
  });

  $('input[name="user[avatar_attributes][hair_color]"]').change(function(){
    var color = $(this).val();
    $('.hair').css('fill', color);
    $('#hidden-hair-color').val(color);
    $('#hair-color-field').val(color)
  });

});